/**************************************************************************************************/
/*                                         Include files                                          */
/**************************************************************************************************/
#include <stdio.h>
#include <string.h>
#include "error_ex4.h"
/**************************************************************************************************/
/*                                     Definitions and Macros                                     */
/**************************************************************************************************/

/**************************************************************************************************/
/*                                 Structures and Enumerations                                    */
/**************************************************************************************************/

/**************************************************************************************************/
/*                                  External global variables                                     */
/**************************************************************************************************/

/**************************************************************************************************/
/*                                  Internal global variables                                     */
/**************************************************************************************************/

/**************************************************************************************************/
/*                                 Declare internal functions                                     */
/**************************************************************************************************/

/**************************************************************************************************/
/*                               Implement external functions                                     */
/**************************************************************************************************/

// Fix error: Define function getInstance
st_error_t getInstance() {
    st_error_t instance = {0}; // Initialize all members of the structure to 0
    return instance;
}


int main()
{
    int ret;
    const int numIns = 2;
    st_error_t ins[numIns];

    for (int i = 0; i < numIns; i++)
    {
        ins[i] = getInstance();  // error because use function getInstance but not defined
        ins[i].a = 123;
        ins[i].b = 234;
        ins[i].c = 789;
        ins[i].d[0] = 123;
        ins[i].d[1] = 456;
        ins[i].d[2] = 789;
        ins[i].e[0] = 123;
        ins[i].e[1] = 234;
        ins[i].e[2] = 255;
    }
    
    printf("Size of struct: %ld\n", sizeof(st_error_t)); // Fix warning: Should use format %ld instead of %d for size_t type

    ret = memcmp((void*)&ins[0], (void*)&ins[1], sizeof(st_error_t));
    if (ret != 0)
    {
        printf("[FAILED] Two instances are not same\n");
    }
    else
    {
        printf("[PASSED] Two instances are same as expected\n");
    }

    return ret;
}
/**************************************************************************************************/
/*                               Implement internal functions                                     */
/**************************************************************************************************/
